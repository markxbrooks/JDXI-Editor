

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>jdxi_editor.ui.windows.jdxi.instrument &mdash; JD-Xi Editor 0.8.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../_static/documentation_options.js?v=486e5634"></script>
      <script src="../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            JD-Xi Editor
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../getting-started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../intro.html#what-is-jdxi-editor">What is JDXI-Editor?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../intro.html#key-features-capabilities">Key Features &amp; Capabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../intro.html#architecture-technology">Architecture &amp; Technology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../intro.html#why-use-jdxi-editor">Why Use JDXI-Editor?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../intro.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../installation.html#system-requirements">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../installation.html#installation-methods">Installation Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../installation.html#method-1-pre-built-packages-recommended">Method 1: Pre-Built Packages (Recommended)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../installation.html#method-2-python-package-installation">Method 2: Python Package Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../installation.html#method-3-source-code-installation">Method 3: Source Code Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../installation.html#method-4-development-setup">Method 4: Development Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../installation.html#post-installation-setup">Post-Installation Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../installation.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../installation.html#getting-help">Getting Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../usage.html">Quick Start Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../usage.html#what-you-ll-learn">What Youâ€™ll Learn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../usage.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../usage.html#hardware-setup">Hardware Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../usage.html#software-launch">Software Launch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../usage.html#interface-overview">Interface Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../usage.html#your-first-sound-creation">Your First Sound Creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../usage.html#essential-workflows">Essential Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../usage.html#quick-tips-for-success">Quick Tips for Success</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../usage.html#common-issues-and-solutions">Common Issues and Solutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../usage.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../editor-windows.html">Editor Windows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../instrument.html">JDXi Instrument Window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../instrument.html#what-is-the-jdxi-instrument-window">What is the JDXi Instrument Window?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../instrument.html#core-architecture-components">Core Architecture &amp; Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../instrument.html#key-features-capabilities">Key Features &amp; Capabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../instrument.html#user-interface-components">User Interface Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../instrument.html#workflow-integration">Workflow Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../instrument.html#technical-specifications">Technical Specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../instrument.html#getting-started-with-the-instrument-window">Getting Started with the Instrument Window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../editor.html">Editor Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../editor.html#what-are-the-editor-windows">What are the Editor Windows?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../editor.html#core-architecture-design">Core Architecture &amp; Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../editor.html#available-editors">Available Editors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../editor.html#getting-started-with-editor-windows">Getting Started with Editor Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../digital_synth.html">Digital Synth Editors (Parts 1 &amp; 2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../digital_synth.html#what-are-the-digital-synth-editors">What are the Digital Synth Editors?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../digital_synth.html#core-architecture-design">Core Architecture &amp; Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../digital_synth.html#digital-synth-editor-features">Digital Synth Editor Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../digital_synth.html#partial-management-system">Partial Management System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../digital_synth.html#performance-features">Performance Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../digital_synth.html#visual-feedback-monitoring">Visual Feedback &amp; Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../digital_synth.html#getting-started-with-digital-synth-editors">Getting Started with Digital Synth Editors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../analog_synth.html">Analog Synth Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../analog_synth.html#what-is-the-analog-synth-editor">What is the Analog Synth Editor?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../analog_synth.html#core-architecture-design">Core Architecture &amp; Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../analog_synth.html#analog-synth-editor-features">Analog Synth Editor Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../analog_synth.html#analog-synthesis-characteristics">Analog Synthesis Characteristics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../analog_synth.html#advanced-features">Advanced Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../analog_synth.html#performance-features">Performance Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../analog_synth.html#getting-started-with-analog-synth-editor">Getting Started with Analog Synth Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../drum_kit.html">Drum Kit Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../drum_kit.html#what-is-the-drum-kit-editor">What is the Drum Kit Editor?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../drum_kit.html#core-architecture-design">Core Architecture &amp; Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../drum_kit.html#drum-kit-editor-features">Drum Kit Editor Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../drum_kit.html#kit-management-system">Kit Management System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../drum_kit.html#advanced-sound-design">Advanced Sound Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../drum_kit.html#visual-feedback-monitoring">Visual Feedback &amp; Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../drum_kit.html#getting-started-with-drum-kit-editor">Getting Started with Drum Kit Editor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../additional-editors.html">Additional Editors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../arpeggiator.html">Arpeggiator Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../arpeggiator.html#what-is-the-arpeggiator-editor">What is the Arpeggiator Editor?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../arpeggiator.html#core-architecture-design">Core Architecture &amp; Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../arpeggiator.html#arpeggiator-editor-features">Arpeggiator Editor Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../arpeggiator.html#advanced-pattern-features">Advanced Pattern Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../arpeggiator.html#sequencing-tools">Sequencing Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../arpeggiator.html#musical-integration">Musical Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../arpeggiator.html#getting-started-with-arpeggiator-editor">Getting Started with Arpeggiator Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../effects.html">Effects Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../effects.html#what-is-the-effects-editor">What is the Effects Editor?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../effects.html#core-architecture-design">Core Architecture &amp; Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../effects.html#effects-editor-features">Effects Editor Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../effects.html#advanced-processing">Advanced Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../effects.html#performance-integration">Performance Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../effects.html#visual-feedback-monitoring">Visual Feedback &amp; Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../effects.html#getting-started-with-effects-editor">Getting Started with Effects Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../vocal_effects.html">Vocal Effects Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../vocal_effects.html#what-is-the-vocal-effects-editor">What is the Vocal Effects Editor?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../vocal_effects.html#core-architecture-design">Core Architecture &amp; Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../vocal_effects.html#vocal-effects-editor-features">Vocal Effects Editor Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../vocal_effects.html#advanced-vocal-processing">Advanced Vocal Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../vocal_effects.html#performance-features">Performance Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../vocal_effects.html#visual-feedback-monitoring">Visual Feedback &amp; Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../vocal_effects.html#getting-started-with-vocal-effects-editor">Getting Started with Vocal Effects Editor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../playing-midi-files.html">Playing MIDI Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../pattern_sequencer.html">Pattern Sequencer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../pattern_sequencer.html#what-is-the-pattern-sequencer">What is the Pattern Sequencer?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../pattern_sequencer.html#core-architecture-design">Core Architecture &amp; Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../pattern_sequencer.html#pattern-sequencer-features">Pattern Sequencer Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../pattern_sequencer.html#advanced-pattern-features">Advanced Pattern Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../pattern_sequencer.html#performance-features">Performance Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../pattern_sequencer.html#creative-tools">Creative Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../pattern_sequencer.html#visual-feedback-monitoring">Visual Feedback &amp; Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../pattern_sequencer.html#getting-started-with-pattern-sequencer">Getting Started with Pattern Sequencer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../midi_file_player.html">MIDI File Player &amp; Recorder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../midi_file_player.html#what-is-the-midi-file-player-recorder">What is the MIDI File Player &amp; Recorder?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../midi_file_player.html#core-architecture-design">Core Architecture &amp; Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../midi_file_player.html#midi-file-player-features">MIDI File Player Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../midi_file_player.html#production-tools">Production Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../midi_file_player.html#advanced-features">Advanced Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../midi_file_player.html#performance-features">Performance Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../midi_file_player.html#visual-feedback-monitoring">Visual Feedback &amp; Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../midi_file_player.html#getting-started-with-midi-file-player-recorder">Getting Started with MIDI File Player &amp; Recorder</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../troubleshooting.html#id1">Troubleshooting</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../legal.html">Legal Disclaimer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../modules.html">jdxi_editor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../jdxi_editor.html">jdxi_editor package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../jdxi_editor.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../jdxi_editor.jdxi.html">jdxi_editor.jdxi package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../jdxi_editor.log.html">jdxi_editor.log package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../jdxi_editor.midi.html">jdxi_editor.midi package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../jdxi_editor.ui.html">jdxi_editor.ui package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../jdxi_editor.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../jdxi_editor.html#module-jdxi_editor.globals">jdxi_editor.globals module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../jdxi_editor.html#module-jdxi_editor.main">jdxi_editor.main module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../jdxi_editor.html#jdxi_editor.main.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../jdxi_editor.html#jdxi_editor.main.setup_splash_screen"><code class="docutils literal notranslate"><span class="pre">setup_splash_screen()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../jdxi_editor.html#module-jdxi_editor.project">jdxi_editor.project module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../jdxi_editor.html#module-jdxi_editor.resources">jdxi_editor.resources module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../jdxi_editor.html#jdxi_editor.resources.resource_path"><code class="docutils literal notranslate"><span class="pre">resource_path()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../jdxi_editor.html#module-jdxi_editor">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../autoapi/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/midi/index.html">midi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/midi/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/midi/colors/index.html">midi.colors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/midi/slider/index.html">midi.slider</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/midi/spin_box/index.html">midi.spin_box</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/midi/time_ruler/index.html">midi.time_ruler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/midi/track/index.html">midi.track</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/midi/track_viewer/index.html">midi.track_viewer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/midi/utils/index.html">midi.utils</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/adsr/index.html">adsr</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/adsr/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/adsr/adsr/index.html">adsr.adsr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/adsr/graph/index.html">adsr.graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/adsr/parameter/index.html">adsr.parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/adsr/plot/index.html">adsr.plot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/pitch/index.html">pitch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/pitch/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/pitch/envelope/index.html">pitch.envelope</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/pitch/envelope_plot/index.html">pitch.envelope_plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/pitch/pwm_plot/index.html">pitch.pwm_plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/pitch/slider_spinbox/index.html">pitch.slider_spinbox</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/piano/index.html">piano</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/piano/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/piano/key/index.html">piano.key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/piano/keyboard/index.html">piano.keyboard</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/panel/index.html">panel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/panel/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/panel/partial/index.html">panel.partial</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/wheel/index.html">wheel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/wheel/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/wheel/mod/index.html">wheel.mod</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/wheel/pitch/index.html">wheel.pitch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/wheel/wheel/index.html">wheel.wheel</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/preset/index.html">preset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/preset/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/preset/combo_box/index.html">preset.combo_box</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/preset/panel/index.html">preset.panel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/preset/patch_name/index.html">preset.patch_name</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/slider/index.html">slider</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/slider/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/slider/slider/index.html">slider.slider</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/slider/index.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/slider/index.html#package-contents">Package Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/slider/index.html#slider.Slider"><code class="docutils literal notranslate"><span class="pre">Slider</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/dialog/index.html">dialog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/dialog/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/dialog/progress/index.html">dialog.progress</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/viewer/index.html">viewer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/viewer/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/viewer/log/index.html">viewer.log</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/button/index.html">button</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/button/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/button/channel/index.html">button.channel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/button/favorite/index.html">button.favorite</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/button/sequencer/index.html">button.sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/button/waveform/index.html">button.waveform</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/button/index.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/button/index.html#package-contents">Package Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/button/index.html#button.ChannelButton"><code class="docutils literal notranslate"><span class="pre">ChannelButton</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/button/index.html#button.SequencerSquare"><code class="docutils literal notranslate"><span class="pre">SequencerSquare</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/switch/index.html">switch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/switch/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/switch/partial/index.html">switch.partial</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/switch/switch/index.html">switch.switch</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/filter/index.html">filter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/filter/index.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/filter/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/filter/index.html#filter.FilterWidget"><code class="docutils literal notranslate"><span class="pre">FilterWidget</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/display/index.html">display</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/display/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/display/digital/index.html">display.digital</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/display/pattern/index.html">display.pattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/display/value/index.html">display.value</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/pattern/index.html">pattern</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/pattern/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/pattern/measure/index.html">pattern.measure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/spin_box/index.html">spin_box</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/spin_box/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/spin_box/spin_box/index.html">spin_box.spin_box</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/envelope/index.html">envelope</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/envelope/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/envelope/base/index.html">envelope.base</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/indicator/index.html">indicator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/indicator/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/indicator/led/index.html">indicator.led</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/indicator/midi/index.html">indicator.midi</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/combo_box/index.html">combo_box</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/combo_box/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/combo_box/combo_box/index.html">combo_box.combo_box</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/jdxi_editor/index.html">jdxi_editor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/jdxi_editor/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/jdxi_editor/globals/index.html">jdxi_editor.globals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/jdxi_editor/jdxi/index.html">jdxi_editor.jdxi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/jdxi_editor/log/index.html">jdxi_editor.log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/jdxi_editor/main/index.html">jdxi_editor.main</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/jdxi_editor/midi/index.html">jdxi_editor.midi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/jdxi_editor/project/index.html">jdxi_editor.project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/jdxi_editor/resources/index.html">jdxi_editor.resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/jdxi_editor/ui/index.html">jdxi_editor.ui</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/filter_plot/index.html">filter_plot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/filter_plot/index.html#classes">Classes:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/filter_plot/index.html#methods">Methods:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/filter_plot/index.html#customization">Customization:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/filter_plot/index.html#id1">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/filter_plot/index.html#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/filter_plot/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/filter_plot/index.html#filter_plot.generate_filter_plot"><code class="docutils literal notranslate"><span class="pre">generate_filter_plot()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/filter_plot/index.html#filter_plot.FilterPlot"><code class="docutils literal notranslate"><span class="pre">FilterPlot</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/envelope_plot/index.html">envelope_plot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/envelope_plot/index.html#classes">Classes:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/envelope_plot/index.html#methods">Methods:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/envelope_plot/index.html#customization">Customization:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/envelope_plot/index.html#attributes">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/envelope_plot/index.html#id1">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/envelope_plot/index.html#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/envelope_plot/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/envelope_plot/index.html#envelope_plot.midi_value_to_float"><code class="docutils literal notranslate"><span class="pre">midi_value_to_float()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/envelope_plot/index.html#envelope_plot.WMTEnvPlot"><code class="docutils literal notranslate"><span class="pre">WMTEnvPlot</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/envelope_plot/index.html#envelope_plot.app"><code class="docutils literal notranslate"><span class="pre">app</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/wave_selector/index.html">wave_selector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/wave_selector/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/wave_selector/wave_selector/index.html">wave_selector.wave_selector</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/analog_filter/index.html">analog_filter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/analog_filter/index.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/analog_filter/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/analog_filter/index.html#analog_filter.AnalogFilterWidget"><code class="docutils literal notranslate"><span class="pre">AnalogFilterWidget</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/slider_spinbox/index.html">slider_spinbox</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/slider_spinbox/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/slider_spinbox/slider_spinbox/index.html">slider_spinbox.slider_spinbox</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../autoapi/analog_filter_plot/index.html">analog_filter_plot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/analog_filter_plot/index.html#classes">Classes:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/analog_filter_plot/index.html#methods">Methods:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/analog_filter_plot/index.html#customization">Customization:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/analog_filter_plot/index.html#id1">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/analog_filter_plot/index.html#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../autoapi/analog_filter_plot/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/analog_filter_plot/index.html#analog_filter_plot.generate_filter_plot"><code class="docutils literal notranslate"><span class="pre">generate_filter_plot()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../autoapi/analog_filter_plot/index.html#analog_filter_plot.AnalogFilterPlot"><code class="docutils literal notranslate"><span class="pre">AnalogFilterPlot</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">JD-Xi Editor</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">jdxi_editor.ui.windows.jdxi.instrument</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for jdxi_editor.ui.windows.jdxi.instrument</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd"># Create editor instances</span>
<span class="sd">analog_editor = AnalogSynthEditor(midi_helper, preset_helper)</span>
<span class="sd">digital_editor = DigitalSynthEditor(midi_helper, preset_helper)</span>
<span class="sd">drum_editor = DrumSynthEditor(midi_helper, preset_helper)</span>

<span class="sd"># Save all controls to a single JSON file</span>
<span class="sd">save_all_controls_to_single_file(</span>
<span class="sd">    editors=[self.analog_editor, self.digital_synth2_editor self.digital_synth1_editor, analog_editor],</span>
<span class="sd">    file_path=&quot;all_controls.json&quot;</span>
<span class="sd">)</span>
<span class="sd">JD-Xi Instrument class for managing presets and MIDI settings.</span>

<span class="sd">This module defines the `JdxiInstrument` class, which extends from the `JdxiUi` class to manage JD-Xi instrument presets, MIDI communication, and UI interactions. It allows for controlling and modifying different preset types (Digital 1, Digital 2, Analog, Drums) and provides MIDI connectivity for program changes and preset management.</span>

<span class="sd">Key Features:</span>
<span class="sd">- Handles MIDI connectivity and communication, including program change signals.</span>
<span class="sd">- Manages different preset types (Digital, Analog, Drums) with the ability to select and load presets.</span>
<span class="sd">- Provides MIDI indicators to display the status of MIDI input/output ports.</span>
<span class="sd">- Includes functionality for dragging the window and selecting different synth types.</span>
<span class="sd">- Integrates with external MIDI devices for seamless performance control.</span>
<span class="sd">- Includes a custom UI to manage and visualize the instrument&#39;s preset settings.</span>
<span class="sd">- Supports the auto-connection of JD-Xi and provides MIDI configuration if auto-connection fails.</span>

<span class="sd">Methods:</span>
<span class="sd">    - __init__: Initializes the instrument&#39;s MIDI settings, UI components, and preset handlers.</span>
<span class="sd">    - mousePressEvent, mouseMoveEvent, mouseReleaseEvent: Handles window drag events for custom window movement.</span>
<span class="sd">    - _select_synth: Selects the current synth type and updates UI button styles.</span>
<span class="sd">    - _update_synth_button_styles: Updates button styles based on the selected synth type.</span>
<span class="sd">    - _get_presets_for_current_synth: Returns the list of presets based on the selected synth type.</span>
<span class="sd">    - _get_for_current_synth: Returns the appropriate preset handler based on the selected synth type.</span>
<span class="sd">    - _previous_tone: Navigates to the previous tone in the preset list and updates the display.</span>
<span class="sd">    - ...</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">platform</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">threading</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">qtawesome</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">qta</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">PySide6.QtCore</span><span class="w"> </span><span class="kn">import</span> <span class="n">Qt</span><span class="p">,</span> <span class="n">QSettings</span><span class="p">,</span> <span class="n">QTimer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">PySide6.QtGui</span><span class="w"> </span><span class="kn">import</span> <span class="n">QShortcut</span><span class="p">,</span> <span class="n">QKeySequence</span><span class="p">,</span> <span class="n">QMouseEvent</span><span class="p">,</span> <span class="n">QCloseEvent</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">PySide6.QtWidgets</span><span class="w"> </span><span class="kn">import</span> <span class="n">QMenu</span><span class="p">,</span> <span class="n">QMessageBox</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.jdxi.file.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">documentation_file_path</span><span class="p">,</span> <span class="n">os_file_open</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.jdxi.preset.button</span><span class="w"> </span><span class="kn">import</span> <span class="n">JDXiPresetButtonData</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.jdxi.synth.type</span><span class="w"> </span><span class="kn">import</span> <span class="n">JDXiSynth</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.jdxi.preset.lists</span><span class="w"> </span><span class="kn">import</span> <span class="n">JDXiPresetToneList</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.jdxi.midi.constant</span><span class="w"> </span><span class="kn">import</span> <span class="n">MidiConstant</span><span class="p">,</span> <span class="n">JDXiConstant</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.log.logger</span><span class="w"> </span><span class="kn">import</span> <span class="n">Logger</span> <span class="k">as</span> <span class="n">log</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.midi.data.address.address</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">AddressStartMSB</span><span class="p">,</span>
    <span class="n">AddressOffsetTemporaryToneUMB</span><span class="p">,</span>
    <span class="n">AddressOffsetSystemUMB</span><span class="p">,</span>
    <span class="n">RolandSysExAddress</span><span class="p">,</span>
    <span class="n">AddressOffsetProgramLMB</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.midi.data.control_change.sustain</span><span class="w"> </span><span class="kn">import</span> <span class="n">ControlChangeSustain</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.midi.data.parameter.digital.common</span><span class="w"> </span><span class="kn">import</span> <span class="n">AddressParameterDigitalCommon</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.midi.channel.channel</span><span class="w"> </span><span class="kn">import</span> <span class="n">MidiChannel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.midi.data.parameter.program.zone</span><span class="w"> </span><span class="kn">import</span> <span class="n">AddressParameterProgramZone</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.midi.io.controller</span><span class="w"> </span><span class="kn">import</span> <span class="n">MidiIOController</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.midi.io.delay</span><span class="w"> </span><span class="kn">import</span> <span class="n">send_with_delay</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.midi.message.roland</span><span class="w"> </span><span class="kn">import</span> <span class="n">RolandSysEx</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.midi.program.helper</span><span class="w"> </span><span class="kn">import</span> <span class="n">JDXiProgramHelper</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.midi.sysex.composer</span><span class="w"> </span><span class="kn">import</span> <span class="n">JDXiSysExComposer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.dialogs.about</span><span class="w"> </span><span class="kn">import</span> <span class="n">UiAboutDialog</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.dialogs.settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">UiPreferencesDialog</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.editors</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">AnalogSynthEditor</span><span class="p">,</span>
    <span class="n">DigitalSynthEditor</span><span class="p">,</span>
    <span class="n">DrumCommonEditor</span><span class="p">,</span>
    <span class="n">ArpeggioEditor</span><span class="p">,</span>
    <span class="n">EffectsCommonEditor</span><span class="p">,</span>
    <span class="n">VocalFXEditor</span><span class="p">,</span>
    <span class="n">ProgramEditor</span><span class="p">,</span>
    <span class="n">SynthEditor</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.editors.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">EditorConfig</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.editors.digital.editor</span><span class="w"> </span><span class="kn">import</span> <span class="n">DigitalSynth2Editor</span><span class="p">,</span> <span class="n">DigitalSynth3Editor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.editors.helpers.program</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">get_program_id_by_name</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.jdxi.preset.helper</span><span class="w"> </span><span class="kn">import</span> <span class="n">JDXiPresetHelper</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.jdxi.style</span><span class="w"> </span><span class="kn">import</span> <span class="n">JDXiStyle</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.jdxi.style.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_sequencer_button_style</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.editors.io.player</span><span class="w"> </span><span class="kn">import</span> <span class="n">MidiFileEditor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.editors.main</span><span class="w"> </span><span class="kn">import</span> <span class="n">MainEditor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.editors.pattern.pattern</span><span class="w"> </span><span class="kn">import</span> <span class="n">PatternSequenceEditor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.editors.io.preset</span><span class="w"> </span><span class="kn">import</span> <span class="n">PresetEditor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.widgets.button</span><span class="w"> </span><span class="kn">import</span> <span class="n">SequencerSquare</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.windows.jdxi.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">show_message_box</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.windows.midi.config_dialog</span><span class="w"> </span><span class="kn">import</span> <span class="n">MIDIConfigDialog</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.windows.midi.debugger</span><span class="w"> </span><span class="kn">import</span> <span class="n">MIDIDebugger</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.windows.midi.monitor</span><span class="w"> </span><span class="kn">import</span> <span class="n">MIDIMessageMonitor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.windows.patch.manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">PatchManager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.windows.jdxi.ui</span><span class="w"> </span><span class="kn">import</span> <span class="n">JDXiUi</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.widgets.viewer.log</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogViewer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.ui.widgets.button.favorite</span><span class="w"> </span><span class="kn">import</span> <span class="n">FavoriteButton</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.project</span><span class="w"> </span><span class="kn">import</span> <span class="n">__package_name__</span>


<div class="viewcode-block" id="JDXiInstrument">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">JDXiInstrument</span><span class="p">(</span><span class="n">JDXiUi</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    class JDXiInstrument</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="JDXiInstrument.__init__">
<a class="viewcode-back" href="../../../../../jdxi_editor.ui.windows.jdxi.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="n">JDXiStyle</span><span class="o">.</span><span class="n">TRANSPARENT</span> <span class="o">+</span> <span class="n">JDXiStyle</span><span class="o">.</span><span class="n">ADSR_DISABLED</span><span class="p">)</span>
        <span class="c1"># Try to auto-connect to JD-Xi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">auto_connect_jdxi</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">current_in_port</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">current_out_port</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_show_midi_config</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_in_indicator</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">is_input_open</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_out_indicator</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">is_output_open</span><span class="p">)</span>
<div class="viewcode-block" id="JDXiInstrument.sysex_composer">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.sysex_composer">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">sysex_composer</span> <span class="o">=</span> <span class="n">JDXiSysExComposer</span><span class="p">()</span></div>

<div class="viewcode-block" id="JDXiInstrument.program_helper">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.program_helper">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">program_helper</span> <span class="o">=</span> <span class="n">JDXiProgramHelper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">,</span> <span class="n">MidiChannel</span><span class="o">.</span><span class="n">PROGRAM</span><span class="p">)</span></div>

<div class="viewcode-block" id="JDXiInstrument.settings">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.settings">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">QSettings</span><span class="p">(</span><span class="s2">&quot;mabsoft&quot;</span><span class="p">,</span> <span class="n">__package_name__</span><span class="p">)</span></div>

        <span class="bp">self</span><span class="o">.</span><span class="n">_load_settings</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_toggle_illuminate_sequencer_lightshow</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_load_saved_favorites</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_synth_button_styles</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_callbacks</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_preset_helpers</span><span class="p">()</span>
<div class="viewcode-block" id="JDXiInstrument.editor_registry">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.editor_registry">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">editor_registry</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;vocal_fx&quot;</span><span class="p">:</span> <span class="n">EditorConfig</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Vocal Effects&quot;</span><span class="p">,</span>
                <span class="n">editor_class</span><span class="o">=</span><span class="n">VocalFXEditor</span><span class="p">,</span>
                <span class="n">synth_type</span><span class="o">=</span><span class="n">JDXiSynth</span><span class="o">.</span><span class="n">VOCAL_FX</span><span class="p">,</span>
                <span class="n">midi_channel</span><span class="o">=</span><span class="n">MidiChannel</span><span class="o">.</span><span class="n">VOCAL_FX</span><span class="p">,</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;mdi.microphone&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;digital1&quot;</span><span class="p">:</span> <span class="n">EditorConfig</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Digital Synth 1&quot;</span><span class="p">,</span>
                <span class="n">editor_class</span><span class="o">=</span><span class="n">DigitalSynthEditor</span><span class="p">,</span>
                <span class="n">synth_type</span><span class="o">=</span><span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span><span class="p">,</span>
                <span class="n">midi_channel</span><span class="o">=</span><span class="n">MidiChannel</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span><span class="p">,</span>
                <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;synth_number&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;mdi.piano&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;digital2&quot;</span><span class="p">:</span> <span class="n">EditorConfig</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Digital Synth 2&quot;</span><span class="p">,</span>
                <span class="n">editor_class</span><span class="o">=</span><span class="n">DigitalSynth2Editor</span><span class="p">,</span>
                <span class="n">synth_type</span><span class="o">=</span><span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_2</span><span class="p">,</span>
                <span class="n">midi_channel</span><span class="o">=</span><span class="n">MidiChannel</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_2</span><span class="p">,</span>
                <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;synth_number&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;mdi.piano&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;digital3&quot;</span><span class="p">:</span> <span class="n">EditorConfig</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Digital Synth 3&quot;</span><span class="p">,</span>
                <span class="n">editor_class</span><span class="o">=</span><span class="n">DigitalSynth3Editor</span><span class="p">,</span>
                <span class="n">synth_type</span><span class="o">=</span><span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_3</span><span class="p">,</span>
                <span class="n">midi_channel</span><span class="o">=</span><span class="n">MidiChannel</span><span class="o">.</span><span class="n">ANALOG_SYNTH</span><span class="p">,</span>
                <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;synth_number&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;mdi.piano&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;analog&quot;</span><span class="p">:</span> <span class="n">EditorConfig</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Analog Synth&quot;</span><span class="p">,</span>
                <span class="n">editor_class</span><span class="o">=</span><span class="n">AnalogSynthEditor</span><span class="p">,</span>
                <span class="n">synth_type</span><span class="o">=</span><span class="n">JDXiSynth</span><span class="o">.</span><span class="n">ANALOG_SYNTH</span><span class="p">,</span>
                <span class="n">midi_channel</span><span class="o">=</span><span class="n">MidiChannel</span><span class="o">.</span><span class="n">ANALOG_SYNTH</span><span class="p">,</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;mdi.piano&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;drums&quot;</span><span class="p">:</span> <span class="n">EditorConfig</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Drums&quot;</span><span class="p">,</span>
                <span class="n">editor_class</span><span class="o">=</span><span class="n">DrumCommonEditor</span><span class="p">,</span>
                <span class="n">synth_type</span><span class="o">=</span><span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DRUM_KIT</span><span class="p">,</span>
                <span class="n">midi_channel</span><span class="o">=</span><span class="n">MidiChannel</span><span class="o">.</span><span class="n">DRUM_KIT</span><span class="p">,</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa5s.drum&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;arpeggio&quot;</span><span class="p">:</span> <span class="n">EditorConfig</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Arpeggiator&quot;</span><span class="p">,</span>
                <span class="n">editor_class</span><span class="o">=</span><span class="n">ArpeggioEditor</span><span class="p">,</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;ph.music-notes-simple-bold&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;effects&quot;</span><span class="p">:</span> <span class="n">EditorConfig</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Effects&quot;</span><span class="p">,</span>
                <span class="n">editor_class</span><span class="o">=</span><span class="n">EffectsCommonEditor</span><span class="p">,</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;ri.sound-module-fill&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="n">EditorConfig</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Pattern&quot;</span><span class="p">,</span>
                <span class="n">editor_class</span><span class="o">=</span><span class="n">PatternSequenceEditor</span><span class="p">,</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;mdi.view-sequential-outline&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;preset&quot;</span><span class="p">:</span> <span class="n">EditorConfig</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Preset&quot;</span><span class="p">,</span>
                <span class="n">editor_class</span><span class="o">=</span><span class="n">PresetEditor</span><span class="p">,</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;mdi6.soundbar&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;program&quot;</span><span class="p">:</span> <span class="n">EditorConfig</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Program&quot;</span><span class="p">,</span>
                <span class="n">editor_class</span><span class="o">=</span><span class="n">ProgramEditor</span><span class="p">,</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;ri.speaker-line&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;midi_file&quot;</span><span class="p">:</span> <span class="n">EditorConfig</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;MIDI File&quot;</span><span class="p">,</span>
                <span class="n">editor_class</span><span class="o">=</span><span class="n">MidiFileEditor</span><span class="p">,</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;mdi.midi-port&quot;</span>
            <span class="p">),</span>
        <span class="p">}</span></div>


        <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<div class="viewcode-block" id="JDXiInstrument.main_editor">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.main_editor">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span> <span class="o">=</span> <span class="kc">None</span></div>

        <span class="bp">self</span><span class="o">.</span><span class="n">data_request</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_show_main_editor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_main_editor</span><span class="p">()</span>
        <span class="c1"># Initialize the current preset and synth type</span>
<div class="viewcode-block" id="JDXiInstrument.current_synth_type">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.current_synth_type">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span> <span class="o">=</span> <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span></div>

<div class="viewcode-block" id="JDXiInstrument.channel">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.channel">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="n">MidiChannel</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span></div>
</div>


<div class="viewcode-block" id="JDXiInstrument._init_preset_helpers">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._init_preset_helpers">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_init_preset_helpers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize preset helpers dynamically&quot;&quot;&quot;</span>
        <span class="n">preset_configs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span>
                <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span><span class="p">,</span>
                <span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">DIGITAL_ENUMERATED</span><span class="p">,</span>
                <span class="n">MidiChannel</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="p">(</span>
                <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_2</span><span class="p">,</span>
                <span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">DIGITAL_ENUMERATED</span><span class="p">,</span>
                <span class="n">MidiChannel</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_2</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="p">(</span>
                <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_3</span><span class="p">,</span>
                <span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">DIGITAL_ENUMERATED</span><span class="p">,</span>
                <span class="n">MidiChannel</span><span class="o">.</span><span class="n">ANALOG_SYNTH</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="p">(</span>
                <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">ANALOG_SYNTH</span><span class="p">,</span>
                <span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">ANALOG_ENUMERATED</span><span class="p">,</span>
                <span class="n">MidiChannel</span><span class="o">.</span><span class="n">ANALOG_SYNTH</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="p">(</span><span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DRUM_KIT</span><span class="p">,</span> <span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">DRUM_ENUMERATED</span><span class="p">,</span> <span class="n">MidiChannel</span><span class="o">.</span><span class="n">DRUM_KIT</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.jdxi.preset.helper</span><span class="w"> </span><span class="kn">import</span> <span class="n">JDXiPresetHelper</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">preset_helpers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">synth_type</span><span class="p">:</span> <span class="n">JDXiPresetHelper</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">,</span> <span class="n">presets</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">preset_type</span><span class="o">=</span><span class="n">synth_type</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">synth_type</span><span class="p">,</span> <span class="n">presets</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">preset_configs</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">helper</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">preset_helpers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">helper</span><span class="o">.</span><span class="n">update_display</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_display_callback</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._set_callbacks">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._set_callbacks">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_set_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set up signal-slot connections for various UI elements.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key_hold_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_midi_send_arp_key_hold</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arpeggiator_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_midi_send_arp_on_off</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">digital_display</span><span class="o">.</span><span class="n">mousePressEvent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_show_program_editor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">program_down_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_program_previous</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">program_up_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_program_next</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">update_program_name</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_current_program_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">midi_message_incoming</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_midi_blink_input</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">midi_message_outgoing</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_midi_blink_output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">update_tone_name</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">tone_name</span><span class="p">,</span> <span class="n">synth_type</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_tone_name_by_type</span><span class="p">(</span>
                <span class="n">tone_name</span><span class="p">,</span> <span class="n">synth_type</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">midi_program_changed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_current_program_number</span><span class="p">)</span>
        <span class="c1"># ctrl-R for data request</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_shortcut</span> <span class="o">=</span> <span class="n">QShortcut</span><span class="p">(</span><span class="n">QKeySequence</span><span class="o">.</span><span class="n">StandardKey</span><span class="o">.</span><span class="n">Refresh</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_shortcut</span><span class="o">.</span><span class="n">activated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_request</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument.closeEvent">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.closeEvent">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QCloseEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle window close event</span>

<span class="sd">        :param event: QCloseEvent</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">close_ports</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_settings</span><span class="p">()</span>
            <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during close event: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">event</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument.mousePressEvent">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.mousePressEvent">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QMouseEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        mousePressEvent</span>

<span class="sd">        :param event: mousePressEvent</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MouseButton</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">old_pos</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">globalPos</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument.mouseMoveEvent">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.mouseMoveEvent">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QMouseEvent</span><span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        mouseMoveEvent</span>

<span class="sd">        :param event: QMouseEvent</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">old_pos</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">globalPos</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">old_pos</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">+</span> <span class="n">delta</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">+</span> <span class="n">delta</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">old_pos</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">globalPos</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument.mouseReleaseEvent">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.mouseReleaseEvent">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">mouseReleaseEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QMouseEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        mouseReleaseEvent</span>

<span class="sd">        :param event: QMouseEvent</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MouseButton</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">old_pos</span> <span class="o">=</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="JDXiInstrument.data_request">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.data_request">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">data_request</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Request the current value of the NRPN parameter from the device.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span>
            <span class="n">target</span><span class="o">=</span><span class="n">send_with_delay</span><span class="p">,</span>
            <span class="n">args</span><span class="o">=</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">midi_requests</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument._handle_program_change">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._handle_program_change">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_handle_program_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bank_letter</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">program_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        perform data request</span>

<span class="sd">        :param bank_letter: str</span>
<span class="sd">        :param program_number: int</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_request</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument.register_editor">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.register_editor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">register_editor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">editor</span><span class="p">:</span> <span class="n">SynthEditor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        register editor</span>

<span class="sd">        :param editor: SynthEditor</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">editor</span><span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Editor </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">editor</span><span class="p">)</span><span class="si">}</span><span class="s2"> registered&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">registered_editor</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Registered Editor </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">registered_editor</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument.set_tone_name_by_type">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.set_tone_name_by_type">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_tone_name_by_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tone_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">synth_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set tone name by type</span>

<span class="sd">        :param tone_name: str Tone name</span>
<span class="sd">        :param synth_type: str Synth type</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">synth_type</span> <span class="o">==</span> <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">PROGRAM</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preset_manager</span><span class="o">.</span><span class="n">set_preset_name_by_type</span><span class="p">(</span><span class="n">synth_type</span><span class="p">,</span> <span class="n">tone_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument.get_preset_helper_for_current_synth">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.get_preset_helper_for_current_synth">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_preset_helper_for_current_synth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JDXiPresetHelper</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the appropriate preset helper based on the current synth preset_type</span>

<span class="sd">        :return: JDXiPresetHelper</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">helper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preset_helpers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">helper</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unknown synth preset_type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span><span class="si">}</span><span class="s2">, defaulting to digital_1&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">preset_helpers</span><span class="p">[</span><span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span><span class="p">]</span>  <span class="c1"># Safe fallback</span>
        <span class="k">return</span> <span class="n">helper</span></div>


<div class="viewcode-block" id="JDXiInstrument.set_current_program_name">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.set_current_program_name">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_current_program_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        program name</span>

<span class="sd">        :param program_name: str</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_program_name</span> <span class="o">=</span> <span class="n">program_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_program_id</span> <span class="o">=</span> <span class="n">get_program_id_by_name</span><span class="p">(</span><span class="n">program_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_program_id</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_program_number</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_program_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_program_id</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument.set_current_program_number">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.set_current_program_number">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_current_program_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">program_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        program number</span>

<span class="sd">        :param channel: int midi channel (discarded)</span>
<span class="sd">        :param program_number: int Program number</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_program_number</span> <span class="o">=</span> <span class="n">program_number</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_request</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument._select_synth">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._select_synth">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_select_synth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">synth_type</span><span class="p">:</span> <span class="n">JDXiSynth</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Select address synth and update button styles</span>

<span class="sd">        :param synth_type: JDXiSynth</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">parameter</span><span class="p">(</span><span class="s2">&quot;Selected synth:&quot;</span><span class="p">,</span> <span class="n">synth_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span> <span class="o">=</span> <span class="n">synth_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">midi_channel_number</span><span class="p">(</span><span class="n">synth_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_synth_button_styles</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preset_helper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preset_helper_for_current_synth</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preset_helper</span><span class="o">.</span><span class="n">preset_changed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">send_program_change</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._update_synth_button_styles">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._update_synth_button_styles">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_update_synth_button_styles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update styles for synth buttons based on selection.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">synth_type</span><span class="p">,</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">synth_buttons</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">is_selected</span> <span class="o">=</span> <span class="n">synth_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
                <span class="n">JDXiStyle</span><span class="o">.</span><span class="n">BUTTON_ROUND_SELECTED</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_selected</span>
                <span class="k">else</span> <span class="n">JDXiStyle</span><span class="o">.</span><span class="n">BUTTON_ROUND</span>
            <span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">is_selected</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._program_update">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._program_update">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_program_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_change</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the program by incrementing or decrementing its index</span>

<span class="sd">        :param index_change: int</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_program_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_program_number</span> <span class="o">+</span> <span class="n">index_change</span>
        <span class="k">if</span> <span class="n">new_program_number</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">show_message_box</span><span class="p">(</span><span class="s2">&quot;First program&quot;</span><span class="p">,</span> <span class="s2">&quot;Already at the first program.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_program_number</span> <span class="o">=</span> <span class="n">new_program_number</span>
        <span class="k">if</span> <span class="n">index_change</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">program_helper</span><span class="o">.</span><span class="n">next_program</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">program_helper</span><span class="o">.</span><span class="n">previous_program</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument._program_previous">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._program_previous">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_program_previous</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Decrement the program index and update the display.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_program_update</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._program_next">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._program_next">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_program_next</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Increment the program index and update the display.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_program_update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._preset_update">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._preset_update">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_preset_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_change</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the preset by incrementing or decrementing its index</span>

<span class="sd">        :param index_change: int</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">presets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preset_manager</span><span class="o">.</span><span class="n">get_presets_for_synth</span><span class="p">(</span>
            <span class="n">synth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">presets</span><span class="p">:</span>
            <span class="n">show_message_box</span><span class="p">(</span><span class="s2">&quot;No presets&quot;</span><span class="p">,</span> <span class="s2">&quot;No presets available for this synth type.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">log</span><span class="o">.</span><span class="n">parameter</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Presets for current synth: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">presets</span><span class="p">)</span>
        <span class="n">max_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">presets</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">new_preset_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_preset_index</span> <span class="o">+</span> <span class="n">index_change</span>

        <span class="k">if</span> <span class="n">new_preset_index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">show_message_box</span><span class="p">(</span><span class="s2">&quot;First preset&quot;</span><span class="p">,</span> <span class="s2">&quot;Already at the first preset.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">new_preset_index</span> <span class="o">&gt;</span> <span class="n">max_index</span><span class="p">:</span>
            <span class="n">show_message_box</span><span class="p">(</span><span class="s2">&quot;Last preset&quot;</span><span class="p">,</span> <span class="s2">&quot;Already at the last preset.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">current_preset_index</span> <span class="o">=</span> <span class="n">new_preset_index</span>
        <span class="n">preset_helper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preset_helper_for_current_synth</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_display_preset</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_preset_index</span><span class="p">,</span>
            <span class="n">presets</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_preset_index</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">preset_helper</span><span class="o">.</span><span class="n">load_preset_by_program_change</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_preset_index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._preset_previous">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._preset_previous">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_preset_previous</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decrement the tone index and update the display</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_preset_update</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._preset_next">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._preset_next">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_preset_next</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Increment the tone index and update the display.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_preset_update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument.update_display_callback">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.update_display_callback">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_display_callback</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">synth_type</span><span class="p">:</span> <span class="n">JDXiSynth</span><span class="p">,</span> <span class="n">preset_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the display for the given synth preset_type and preset index</span>

<span class="sd">        :param synth_type: JDXiSynth</span>
<span class="sd">        :param preset_index: int</span>
<span class="sd">        :param channel: int</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;update_display_callback: synth_type: </span><span class="si">{</span><span class="n">synth_type</span><span class="si">}</span><span class="s2"> preset_index: </span><span class="si">{</span><span class="n">preset_index</span><span class="si">}</span><span class="s2">, channel: </span><span class="si">{</span><span class="n">channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">presets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preset_manager</span><span class="o">.</span><span class="n">get_presets_for_channel</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_display_preset</span><span class="p">(</span>
            <span class="n">preset_index</span><span class="p">,</span>
            <span class="n">presets</span><span class="p">[</span><span class="n">preset_index</span><span class="p">],</span>
            <span class="n">channel</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._toggle_illuminate_sequencer_lightshow">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._toggle_illuminate_sequencer_lightshow">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_toggle_illuminate_sequencer_lightshow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Toggle the sequencer lightshow on or off</span>

<span class="sd">        :param enabled: bool</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">enabled</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;lightshow_timer&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">lightshow_timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lightshow_timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="c1"># Turn off any active lights</span>
            <span class="k">for</span> <span class="n">btn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequencer_buttons</span><span class="p">:</span>
                <span class="n">btn</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="n">generate_sequencer_button_style</span><span class="p">(</span><span class="kc">False</span><span class="p">))</span>
                <span class="n">btn</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lightshow_index</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">step</span><span class="p">():</span>
            <span class="c1"># Turn off previous</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">button</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sequencer_buttons</span><span class="p">):</span>
                <span class="n">button</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
                    <span class="n">generate_sequencer_button_style</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lightshow_index</span><span class="p">)</span>
                <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_lightshow_index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lightshow_index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sequencer_buttons</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_lightshow_index</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Loop back to start</span>

        <span class="c1"># Create and start the timer</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;lightshow_timer&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lightshow_timer</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lightshow_timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lightshow_timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>  <span class="c1"># Every 500 ms</span></div>


<div class="viewcode-block" id="JDXiInstrument.init_main_editor">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.init_main_editor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">init_main_editor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the UI for the MainEditor</span>

<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">setUpdatesEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;program&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;digital1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;digital2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;digital3&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;drums&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;analog&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;arpeggio&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;effects&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;vocal_fx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;pattern&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;midi_file&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">editor_tab_widget</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">setUpdatesEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument.show_editor">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.show_editor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">show_editor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">editor_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show editor of given type</span>

<span class="sd">        :param editor_type: str Editor type</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editor_registry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">editor_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown editor type: </span><span class="si">{</span><span class="n">editor_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">synth_type</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">synth_type</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">midi_channel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">midi_channel</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_show_editor_tab</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">editor_class</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">icon</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument.on_documentation">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.on_documentation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_documentation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        on_documentation</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">html_file</span> <span class="o">=</span> <span class="n">documentation_file_path</span><span class="p">(</span><span class="s2">&quot;index.html&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os_file_open</span><span class="p">(</span><span class="n">html_file</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2"> occurred opening documentation&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument.on_preferences">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.on_preferences">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_preferences</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        on_preferences</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">preferences_dialog</span> <span class="o">=</span> <span class="n">UiPreferencesDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">preferences_dialog</span><span class="o">.</span><span class="n">ui_setup</span><span class="p">(</span><span class="n">preferences_dialog</span><span class="p">)</span>
        <span class="n">preferences_dialog</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_DeleteOnClose</span><span class="p">)</span>
        <span class="n">preferences_dialog</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument.get_existing_editor">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.get_existing_editor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_existing_editor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">editor_class</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SynthEditor</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get existing editor instance of the specified class</span>

<span class="sd">        :param editor_class: class</span>
<span class="sd">        :return: Optional[SynthEditor]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">instance_attr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">editor_class</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">_instance&quot;</span>
        <span class="n">existing_editor</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance_attr</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">parameter</span><span class="p">(</span><span class="s2">&quot;existing_editor&quot;</span><span class="p">,</span> <span class="n">existing_editor</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">existing_editor</span></div>


<div class="viewcode-block" id="JDXiInstrument._show_editor_tab">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._show_editor_tab">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_show_editor_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">editor_class</span><span class="p">,</span> <span class="n">icon</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        _show_editor_tab</span>

<span class="sd">        :param title: str Title of the tab</span>
<span class="sd">        :param editor_class: cls Class of the Editor</span>
<span class="sd">        :param kwargs:</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">instance_attr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">editor_class</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">_instance&quot;</span>
            <span class="n">existing_editor</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance_attr</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">existing_editor</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">editor_tab_widget</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="n">existing_editor</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">index</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">editor_tab_widget</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
                    <span class="k">return</span>

            <span class="n">preset_helper</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_preset_helper_for_current_synth</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">editor_class</span> <span class="ow">in</span> <span class="p">{</span>
                    <span class="n">ArpeggioEditor</span><span class="p">,</span> <span class="n">DigitalSynthEditor</span><span class="p">,</span> <span class="n">DigitalSynth2Editor</span><span class="p">,</span> <span class="n">DigitalSynth3Editor</span><span class="p">,</span>
                    <span class="n">AnalogSynthEditor</span><span class="p">,</span> <span class="n">DrumCommonEditor</span><span class="p">,</span> <span class="n">PatternSequenceEditor</span><span class="p">,</span>
                    <span class="n">ProgramEditor</span><span class="p">,</span> <span class="n">PresetEditor</span><span class="p">,</span> <span class="n">MidiFileEditor</span><span class="p">,</span>
                    <span class="n">VocalFXEditor</span><span class="p">,</span> <span class="n">EffectsCommonEditor</span><span class="p">,</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="kc">None</span>
            <span class="p">)</span>

            <span class="n">editor</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">editor_class</span><span class="p">(</span>
                    <span class="n">midi_helper</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">,</span>
                    <span class="n">preset_helper</span><span class="o">=</span><span class="n">preset_helper</span><span class="p">,</span>
                    <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">preset_helper</span>
                <span class="k">else</span> <span class="n">editor_class</span><span class="p">(</span>
                    <span class="n">midi_out</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">midi_out</span><span class="p">,</span>
                    <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">editor</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">editor_tab_widget</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">editor</span><span class="p">,</span> <span class="n">qta</span><span class="o">.</span><span class="n">icon</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#666666&quot;</span><span class="p">),</span> <span class="n">title</span><span class="p">)</span>
            <span class="n">editor</span><span class="o">.</span><span class="n">setProperty</span><span class="p">(</span><span class="s2">&quot;analog&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">editor_tab_widget</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="n">editor</span><span class="p">)</span>

            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance_attr</span><span class="p">,</span> <span class="n">editor</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_editor</span><span class="p">(</span><span class="n">editor</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">editor</span><span class="p">,</span> <span class="s2">&quot;preset_helper&quot;</span><span class="p">):</span>
                <span class="n">editor</span><span class="o">.</span><span class="n">preset_helper</span><span class="o">.</span><span class="n">update_display</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_display_callback</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">editor</span><span class="p">,</span> <span class="s2">&quot;partial_editors&quot;</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">partial</span> <span class="ow">in</span> <span class="n">editor</span><span class="o">.</span><span class="n">partial_editors</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">register_editor</span><span class="p">(</span><span class="n">partial</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error showing </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2"> editor&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._show_editor">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._show_editor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_show_editor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">editor_class</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        _show editor</span>

<span class="sd">        :param title: str</span>
<span class="sd">        :param editor_class: class</span>
<span class="sd">        :param kwargs: Any</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">instance_attr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">editor_class</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">_instance&quot;</span>
            <span class="n">existing_editor</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance_attr</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">existing_editor</span><span class="p">:</span>
                <span class="n">existing_editor</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="n">existing_editor</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span>
                <span class="k">return</span>

            <span class="n">preset_helper</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_preset_helper_for_current_synth</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">editor_class</span>
                <span class="ow">in</span> <span class="p">[</span>
                    <span class="n">ArpeggioEditor</span><span class="p">,</span>
                    <span class="n">DigitalSynthEditor</span><span class="p">,</span>
                    <span class="n">DigitalSynth2Editor</span><span class="p">,</span>
                    <span class="n">AnalogSynthEditor</span><span class="p">,</span>
                    <span class="n">DrumCommonEditor</span><span class="p">,</span>
                    <span class="n">PatternSequenceEditor</span><span class="p">,</span>
                    <span class="n">ProgramEditor</span><span class="p">,</span>
                    <span class="n">PresetEditor</span><span class="p">,</span>
                    <span class="n">MidiFileEditor</span><span class="p">,</span>
                    <span class="n">VocalFXEditor</span><span class="p">,</span>
                    <span class="n">EffectsCommonEditor</span><span class="p">,</span>
                <span class="p">]</span>
                <span class="k">else</span> <span class="kc">None</span>
            <span class="p">)</span>

            <span class="n">editor</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">editor_class</span><span class="p">(</span>
                    <span class="n">midi_helper</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">,</span>
                    <span class="n">preset_helper</span><span class="o">=</span><span class="n">preset_helper</span><span class="p">,</span>
                    <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">preset_helper</span>
                <span class="k">else</span> <span class="n">editor_class</span><span class="p">(</span>
                    <span class="n">midi_out</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">midi_out</span><span class="p">,</span>
                    <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">editor</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
            <span class="n">editor</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="n">editor</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span>

            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance_attr</span><span class="p">,</span> <span class="n">editor</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_editor</span><span class="p">(</span><span class="n">editor</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">editor</span><span class="p">,</span> <span class="s2">&quot;preset_helper&quot;</span><span class="p">):</span>
                <span class="n">editor</span><span class="o">.</span><span class="n">preset_helper</span><span class="o">.</span><span class="n">update_display</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">update_display_callback</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">editor</span><span class="p">,</span> <span class="s2">&quot;partial_editors&quot;</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">partial_item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">editor</span><span class="o">.</span><span class="n">partial_editors</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">register_editor</span><span class="p">(</span><span class="n">partial_item</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error showing </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2"> editor&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._show_log_viewer">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._show_log_viewer">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_show_log_viewer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Show log viewer window&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_viewer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log_viewer</span> <span class="o">=</span> <span class="n">LogViewer</span><span class="p">(</span><span class="n">midi_helper</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_viewer</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_viewer</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span>
        <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;Showing LogViewer window&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._show_midi_config">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._show_midi_config">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_show_midi_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Show MIDI configuration dialog&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dialog</span> <span class="o">=</span> <span class="n">MIDIConfigDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error showing MIDI configuration&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_error</span><span class="p">(</span><span class="s2">&quot;MIDI Configuration Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span></div>


<div class="viewcode-block" id="JDXiInstrument._show_midi_debugger">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._show_midi_debugger">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_show_midi_debugger</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Open MIDI debugger window&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;MIDI helper not initialized&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_debugger</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_debugger</span> <span class="o">=</span> <span class="n">MIDIDebugger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">)</span>
            <span class="c1"># Clean up reference when window is closed</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_debugger</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_DeleteOnClose</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;Created new MIDI debugger window&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_debugger</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_debugger</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument._show_midi_message_monitor">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._show_midi_message_monitor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_show_midi_message_monitor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Open MIDI message monitor window&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_message_monitor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_message_monitor</span> <span class="o">=</span> <span class="n">MIDIMessageMonitor</span><span class="p">(</span>
                <span class="n">midi_helper</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_message_monitor</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_DeleteOnClose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_message_monitor</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_message_monitor</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument._show_program_editor">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._show_program_editor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_show_program_editor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Open the ProgramEditor when the digital display is clicked.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;program&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._show_about_help">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._show_about_help">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_show_about_help</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        _show_about_help</span>

<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">about_dialog</span> <span class="o">=</span> <span class="n">UiAboutDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">about_dialog</span><span class="o">.</span><span class="n">setup_ui</span><span class="p">(</span><span class="n">about_dialog</span><span class="p">)</span>
        <span class="n">about_dialog</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_DeleteOnClose</span><span class="p">)</span>
        <span class="n">about_dialog</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument._show_main_editor">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._show_main_editor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_show_main_editor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        _show_about_help</span>

<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span> <span class="o">=</span> <span class="n">MainEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_editor</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument._midi_file_load">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._midi_file_load">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_midi_file_load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        _midi_file_load</span>

<span class="sd">        :return: None</span>
<span class="sd">        Load a MIDI file and process it</span>
<span class="sd">        1. Load the current MIDI file using the MidiFileEditor.</span>
<span class="sd">        2. If the editor does not exist, create and show it.</span>
<span class="sd">        3. After saving, show the editor again.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_file_editor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_existing_editor</span><span class="p">(</span><span class="n">MidiFileEditor</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_file_editor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;midi_file&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_file_editor</span><span class="o">.</span><span class="n">midi_load_file</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;midi_file&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._midi_file_save">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._midi_file_save">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_midi_file_save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        _midi_file_save</span>
<span class="sd">        :return:</span>
<span class="sd">        1. Save the current MIDI file using the MidiFileEditor.</span>
<span class="sd">        2. If the editor does not exist, create and show it.</span>
<span class="sd">        3. After saving, show the editor again.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_file_editor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_existing_editor</span><span class="p">(</span><span class="n">MidiFileEditor</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_file_editor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;midi_file&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_file_editor</span><span class="o">.</span><span class="n">midi_save_file</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_editor</span><span class="p">(</span><span class="s2">&quot;midi_file&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._patch_load">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._patch_load">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_patch_load</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Show load patch dialog&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">patch_manager</span> <span class="o">=</span> <span class="n">PatchManager</span><span class="p">(</span>
                <span class="n">midi_helper</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">,</span>
                <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">save_mode</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">editors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">patch_manager</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error loading patch&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._patch_save">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._patch_save">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_patch_save</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Show save patch dialog&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">patch_manager</span> <span class="o">=</span> <span class="n">PatchManager</span><span class="p">(</span>
                <span class="n">midi_helper</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">,</span>
                <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">save_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">editors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">patch_manager</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error saving patch&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument.load_button_preset">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.load_button_preset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_button_preset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">:</span> <span class="n">SequencerSquare</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        load preset data stored on the button</span>

<span class="sd">        :param button: SequencerSquare</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">preset</span> <span class="o">=</span> <span class="n">button</span><span class="o">.</span><span class="n">preset</span>
        <span class="n">preset_data</span> <span class="o">=</span> <span class="n">JDXiPresetButtonData</span><span class="p">(</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">preset</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>  <span class="c1"># Ensure this is address valid preset_type</span>
            <span class="n">number</span><span class="o">=</span><span class="n">preset</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>  <span class="c1"># Convert to 1-based index</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span> <span class="o">=</span> <span class="n">preset</span><span class="o">.</span><span class="n">type</span>
        <span class="n">preset_helper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_preset_helper_for_current_synth</span><span class="p">()</span>
        <span class="n">preset_helper</span><span class="o">.</span><span class="n">load_preset</span><span class="p">(</span><span class="n">preset_data</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._generate_button_preset">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._generate_button_preset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_button_preset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">JDXiPresetButtonData</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate a ButtonPreset object based on the current preset.</span>

<span class="sd">        :return: Optional[JDXiPresetButtonData]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Update the current preset index or details here</span>
            <span class="n">button_preset</span> <span class="o">=</span> <span class="n">JDXiPresetButtonData</span><span class="p">(</span>
                <span class="n">number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">preset_manager</span><span class="o">.</span><span class="n">current_preset_number</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">preset_manager</span><span class="o">.</span><span class="n">current_preset_name</span><span class="p">,</span>
                <span class="nb">type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current preset retrieved: </span><span class="si">{</span><span class="n">button_preset</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">button_preset</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error generating button preset&quot;</span><span class="p">,</span> <span class="n">ex</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="JDXiInstrument._get_current_preset_name_from_settings">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._get_current_preset_name_from_settings">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_current_preset_name_from_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: str</span>

<span class="sd">        Get the name of the currently selected preset</span>
<span class="sd">        based on the last used preset type and number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">synth_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                <span class="s2">&quot;last_preset/synth_type&quot;</span><span class="p">,</span> <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span>
            <span class="p">)</span>
            <span class="n">preset_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;last_preset/preset_num&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>

            <span class="c1"># Get preset name - adjust index to be 0-based</span>
            <span class="k">if</span> <span class="n">synth_type</span> <span class="o">==</span> <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">ANALOG_SYNTH</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">ANALOG</span><span class="p">[</span>
                    <span class="n">preset_number</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="p">]</span>  <span class="c1"># Convert 1-based to 0-based</span>
            <span class="k">if</span> <span class="n">synth_type</span> <span class="o">==</span> <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">DIGITAL_ENUMERATED</span><span class="p">[</span><span class="n">preset_number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">synth_type</span> <span class="o">==</span> <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_2</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">DIGITAL_ENUMERATED</span><span class="p">[</span><span class="n">preset_number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">DRUM_ENUMERATED</span><span class="p">[</span><span class="n">preset_number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;INIT PATCH&quot;</span></div>


<div class="viewcode-block" id="JDXiInstrument._get_current_preset_type">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._get_current_preset_type">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_current_preset_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JDXiSynth</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the preset_type of the currently selected preset</span>

<span class="sd">        :return: JDXiSynth</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span></div>

        <span class="c1"># return self.settings.value(&quot;last_preset/synth_type&quot;, PresetType.ANALOG)</span>

<div class="viewcode-block" id="JDXiInstrument._ui_update_octave">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._ui_update_octave">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_ui_update_octave</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update octave-related UI elements&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">octave_down</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_octave</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">octave_up</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_octave</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
        <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Updated octave to: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_octave</span><span class="si">}</span><span class="s2"> (value: </span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="n">JDXiConstant</span><span class="o">.</span><span class="n">CENTER_OCTAVE_VALUE</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">current_octave</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._midi_init_ports">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._midi_init_ports">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_midi_init_ports</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">in_port</span><span class="p">:</span> <span class="n">MidiIOController</span><span class="p">,</span> <span class="n">out_port</span><span class="p">:</span> <span class="n">MidiIOController</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set MIDI input and output ports</span>

<span class="sd">        :param in_port:</span>
<span class="sd">        :param out_port:</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">jdxi_editor.midi.io.helper</span><span class="w"> </span><span class="kn">import</span> <span class="n">MidiIOHelper</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">midi_in</span> <span class="o">=</span> <span class="n">MidiIOHelper</span><span class="o">.</span><span class="n">open_input</span><span class="p">(</span><span class="n">in_port</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">midi_out</span> <span class="o">=</span> <span class="n">MidiIOHelper</span><span class="o">.</span><span class="n">open_output</span><span class="p">(</span><span class="n">out_port</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">in_port_name</span> <span class="o">=</span> <span class="n">in_port</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">out_port_name</span> <span class="o">=</span> <span class="n">out_port</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">identify_device</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_in_indicator</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">midi_in</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_out_indicator</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">midi_out</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_settings</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error setting MIDI ports&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._midi_blink_input">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._midi_blink_input">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_midi_blink_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle incoming MIDI messages and flash indicator&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_in_indicator</span><span class="o">.</span><span class="n">blink</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument._midi_blink_output">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._midi_blink_output">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_midi_blink_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;handle outgoing message blink&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midi_out_indicator</span><span class="o">.</span><span class="n">blink</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument._midi_send_octave">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._midi_send_octave">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_midi_send_octave</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send octave change MIDI message</span>

<span class="sd">        :param direction: int</span>
<span class="sd">        :return: Union[None, bool]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">:</span>
            <span class="c1"># Update octave tracking</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_octave</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_octave</span> <span class="o">+</span> <span class="n">direction</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ui_update_octave</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
            <span class="c1"># Map octave value to correct SysEx value</span>
            <span class="c1"># -3 = 0x3D, -2 = 0x3E, -1 = 0x3F, 0 = 0x40, +1 = 0x41, +2 = 0x42, +3 = 0x43</span>
            <span class="n">octave_value</span> <span class="o">=</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_octave</span>  <span class="c1"># 0x40 is center octave</span>
            <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Sending octave change SysEx, new octave: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_octave</span><span class="si">}</span><span class="s2"> (value: </span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="n">octave_value</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>
            <span class="n">address</span> <span class="o">=</span> <span class="n">RolandSysExAddress</span><span class="p">(</span>
                <span class="n">msb</span><span class="o">=</span><span class="n">AddressStartMSB</span><span class="o">.</span><span class="n">TEMPORARY_TONE</span><span class="p">,</span>
                <span class="n">umb</span><span class="o">=</span><span class="n">AddressOffsetTemporaryToneUMB</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span><span class="p">,</span>
                <span class="n">lmb</span><span class="o">=</span><span class="n">AddressOffsetProgramLMB</span><span class="o">.</span><span class="n">COMMON</span><span class="p">,</span>
                <span class="n">lsb</span><span class="o">=</span><span class="n">AddressParameterDigitalCommon</span><span class="o">.</span><span class="n">OCTAVE_SHIFT</span><span class="o">.</span><span class="n">lsb</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">sysex_message</span> <span class="o">=</span> <span class="n">RolandSysEx</span><span class="p">(</span>
                <span class="n">sysex_address</span><span class="o">=</span><span class="n">address</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="n">octave_value</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">send_midi_message</span><span class="p">(</span><span class="n">sysex_message</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._midi_send_arp_key_hold">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._midi_send_arp_key_hold">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_midi_send_arp_key_hold</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send arpeggiator key hold (latch) command</span>

<span class="sd">        :param state: bool</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">midi_key_hold_latched</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_key_hold_latched</span>
                <span class="c1"># Value: 0 = OFF, 1 = ON</span>
                <span class="n">value</span> <span class="o">=</span> <span class="mh">0x01</span> <span class="k">if</span> <span class="n">state</span> <span class="k">else</span> <span class="mh">0x00</span>
                <span class="n">address1</span> <span class="o">=</span> <span class="n">RolandSysExAddress</span><span class="p">(</span>
                    <span class="n">msb</span><span class="o">=</span><span class="n">AddressStartMSB</span><span class="o">.</span><span class="n">TEMPORARY_TONE</span><span class="p">,</span>
                    <span class="n">umb</span><span class="o">=</span><span class="n">AddressOffsetTemporaryToneUMB</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span><span class="p">,</span>
                    <span class="n">lmb</span><span class="o">=</span><span class="n">AddressOffsetProgramLMB</span><span class="o">.</span><span class="n">PART_DIGITAL_SYNTH_1</span><span class="p">,</span>
                    <span class="n">lsb</span><span class="o">=</span><span class="mh">0x46</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">address2</span> <span class="o">=</span> <span class="n">RolandSysExAddress</span><span class="p">(</span>
                    <span class="n">msb</span><span class="o">=</span><span class="n">AddressStartMSB</span><span class="o">.</span><span class="n">TEMPORARY_TONE</span><span class="p">,</span>
                    <span class="n">umb</span><span class="o">=</span><span class="mh">0x01</span><span class="p">,</span>
                    <span class="n">lmb</span><span class="o">=</span><span class="mh">0x00</span><span class="p">,</span>
                    <span class="n">lsb</span><span class="o">=</span><span class="mh">0x14</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="c1"># Assuming RolandSysEx accepts an address in bytes</span>
                <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="p">[</span><span class="n">address1</span><span class="p">,</span> <span class="n">address2</span><span class="p">]:</span>
                    <span class="c1"># Send the SysEx message</span>
                    <span class="n">sysex_message</span> <span class="o">=</span> <span class="n">RolandSysEx</span><span class="p">(</span>
                        <span class="n">sysex_address</span><span class="o">=</span><span class="n">address</span><span class="p">,</span>
                        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">send_midi_message</span><span class="p">(</span><span class="n">sysex_message</span><span class="p">)</span>
                <span class="n">cc_value</span> <span class="o">=</span> <span class="mi">127</span> <span class="k">if</span> <span class="n">state</span> <span class="k">else</span> <span class="mi">0</span>
                <span class="n">cc_list</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">ControlChangeSustain</span><span class="o">.</span><span class="n">HOLD1</span><span class="p">,</span>  <span class="c1"># Hold-1 Damper (Sustain) â€“ CC64</span>
                    <span class="n">ControlChangeSustain</span><span class="o">.</span><span class="n">PORTAMENTO</span><span class="p">,</span>  <span class="c1"># Portamento (on/off)</span>
                    <span class="n">ControlChangeSustain</span><span class="o">.</span><span class="n">SOSTENUTO</span><span class="p">,</span>  <span class="c1"># Sostenuto â€“ CC66</span>
                    <span class="n">ControlChangeSustain</span><span class="o">.</span><span class="n">SOFT_PEDAL</span><span class="p">,</span>  <span class="c1"># Soft Pedal (Una Corda) â€“ CC67</span>
                    <span class="n">ControlChangeSustain</span><span class="o">.</span><span class="n">LEGATO</span><span class="p">,</span>  <span class="c1"># Legato foot switch</span>
                    <span class="n">ControlChangeSustain</span><span class="o">.</span><span class="n">HOLD2</span><span class="p">,</span>
                <span class="p">]</span>  <span class="c1"># Hold-2</span>
                <span class="c1"># cc_list = [68]</span>
                <span class="k">for</span> <span class="n">cc</span> <span class="ow">in</span> <span class="n">cc_list</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">send_control_change</span><span class="p">(</span>
                        <span class="n">cc</span><span class="p">,</span> <span class="n">cc_value</span><span class="p">,</span> <span class="n">MidiChannel</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span>
                    <span class="p">)</span>
                <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sent arpeggiator key hold: </span><span class="si">{</span><span class="s1">&#39;ON&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;OFF&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error sending arp key hold&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._midi_send_arp_on_off">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._midi_send_arp_on_off">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_midi_send_arp_on_off</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send arpeggiator on/off command</span>

<span class="sd">        :param state: bool ON/OFF</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">MidiConstant</span><span class="o">.</span><span class="n">VALUE_ON</span> <span class="k">if</span> <span class="n">state</span> <span class="k">else</span> <span class="n">MidiConstant</span><span class="o">.</span><span class="n">VALUE_OFF</span>
                <span class="p">)</span>  <span class="c1"># 1 = ON, 0 = OFF</span>
                <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sent arpeggiator on/off: </span><span class="si">{</span><span class="s1">&#39;ON&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;OFF&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="c1"># send arp on to all zones</span>
                <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="n">AddressOffsetProgramLMB</span><span class="o">.</span><span class="n">CONTROLLER</span><span class="p">,</span>
                    <span class="n">AddressOffsetProgramLMB</span><span class="o">.</span><span class="n">PART_DIGITAL_SYNTH_1</span><span class="p">,</span>
                    <span class="n">AddressOffsetProgramLMB</span><span class="o">.</span><span class="n">PART_DIGITAL_SYNTH_2</span><span class="p">,</span>
                    <span class="n">AddressOffsetProgramLMB</span><span class="o">.</span><span class="n">PART_ANALOG</span><span class="p">,</span>
                    <span class="n">AddressOffsetProgramLMB</span><span class="o">.</span><span class="n">ZONE_DRUM</span><span class="p">,</span>
                <span class="p">]:</span>
                    <span class="n">address</span> <span class="o">=</span> <span class="n">RolandSysExAddress</span><span class="p">(</span>
                        <span class="n">msb</span><span class="o">=</span><span class="n">AddressStartMSB</span><span class="o">.</span><span class="n">TEMPORARY_PROGRAM</span><span class="p">,</span>
                        <span class="n">umb</span><span class="o">=</span><span class="n">AddressOffsetSystemUMB</span><span class="o">.</span><span class="n">COMMON</span><span class="p">,</span>
                        <span class="n">lmb</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                        <span class="n">lsb</span><span class="o">=</span><span class="n">MidiConstant</span><span class="o">.</span><span class="n">ZERO_BYTE</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">sysex_message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sysex_composer</span><span class="o">.</span><span class="n">compose_message</span><span class="p">(</span>
                        <span class="n">address</span><span class="o">=</span><span class="n">address</span><span class="p">,</span>
                        <span class="n">param</span><span class="o">=</span><span class="n">AddressParameterProgramZone</span><span class="o">.</span><span class="n">ARPEGGIO_SWITCH</span><span class="p">,</span>
                        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">send_midi_message</span><span class="p">(</span><span class="n">sysex_message</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error sending arp on/off&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument.handle_piano_note_on">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.handle_piano_note_on">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_piano_note_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">note_num</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle piano key press</span>

<span class="sd">        :param note_num: int note midi number</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">:</span>
            <span class="c1"># self.channel is 0-indexed, so add 1 to match MIDI channel in log file</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="n">MidiConstant</span><span class="o">.</span><span class="n">NOTE_ON</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="p">,</span> <span class="n">note_num</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">send_raw_message</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sent Note On: </span><span class="si">{</span><span class="n">note_num</span><span class="si">}</span><span class="s2"> on channel </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument.handle_piano_note_off">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument.handle_piano_note_off">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_piano_note_off</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">note_num</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle piano key release</span>

<span class="sd">        :param note_num: int midi note number</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">:</span>
            <span class="c1"># Calculate the correct status byte for note_off:</span>
            <span class="c1"># 0x80 is the base for note_off messages. Subtract 1 if self.channel is 1-indexed.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_key_hold_latched</span><span class="p">:</span>
                <span class="n">status</span> <span class="o">=</span> <span class="n">MidiConstant</span><span class="o">.</span><span class="n">NOTE_OFF</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="n">status</span><span class="p">,</span> <span class="n">note_num</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">send_raw_message</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sent Note Off: </span><span class="si">{</span><span class="n">note_num</span><span class="si">}</span><span class="s2"> on channel </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._load_last_preset">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._load_last_preset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_load_last_preset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load the last used preset from settings.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Get last preset info from settings</span>
            <span class="n">synth_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                <span class="s2">&quot;last_preset/synth_type&quot;</span><span class="p">,</span> <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span>
            <span class="p">)</span>
            <span class="n">preset_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;last_preset/preset_num&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">channel</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;last_preset/channel&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">))</span>

            <span class="c1"># Define mappings for synth types</span>
            <span class="n">synth_mappings</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">ANALOG_SYNTH</span><span class="p">:</span> <span class="p">(</span><span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">ANALOG</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_1</span><span class="p">:</span> <span class="p">(</span>
                    <span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">DIGITAL_ENUMERATED</span><span class="p">,</span>
                    <span class="mi">1</span><span class="p">,</span>
                    <span class="mi">16</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DIGITAL_SYNTH_2</span><span class="p">:</span> <span class="p">(</span>
                    <span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">DIGITAL_ENUMERATED</span><span class="p">,</span>
                    <span class="mi">2</span><span class="p">,</span>
                    <span class="mi">16</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">DRUM_KIT</span><span class="p">:</span> <span class="p">(</span><span class="n">JDXiPresetToneList</span><span class="o">.</span><span class="n">DRUM_ENUMERATED</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>
            <span class="p">}</span>

            <span class="c1"># Get preset list and MIDI parameters based on synth type</span>
            <span class="n">presets</span><span class="p">,</span> <span class="n">bank_msb</span><span class="p">,</span> <span class="n">lsb_divisor</span> <span class="o">=</span> <span class="n">synth_mappings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">synth_type</span><span class="p">,</span> <span class="p">([],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">bank_lsb</span> <span class="o">=</span> <span class="n">preset_number</span> <span class="o">//</span> <span class="n">lsb_divisor</span>
            <span class="n">program</span> <span class="o">=</span> <span class="n">preset_number</span> <span class="o">%</span> <span class="n">lsb_divisor</span>

            <span class="c1"># Send MIDI messages to load preset</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;midi_helper&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">send_bank_select</span><span class="p">(</span><span class="n">bank_msb</span><span class="p">,</span> <span class="n">bank_lsb</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">send_program_change</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>

                <span class="c1"># Update display and channel</span>
                <span class="n">preset_name</span> <span class="o">=</span> <span class="n">presets</span><span class="p">[</span><span class="n">preset_number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># Adjust index to be 0-based</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_display_preset</span><span class="p">(</span><span class="n">preset_number</span><span class="p">,</span> <span class="n">preset_name</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>

                <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loaded last preset: </span><span class="si">{</span><span class="n">preset_name</span><span class="si">}</span><span class="s2"> on channel </span><span class="si">{</span><span class="n">channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error loading last preset&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._save_last_preset">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._save_last_preset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_save_last_preset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">synth_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">preset_num</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the last used preset to settings</span>

<span class="sd">        Args:</span>
<span class="sd">            synth_type: Type of synth (&#39;Analog&#39;, &#39;Digital 1&#39;, &#39;Digital 2&#39;, &#39;Drums&#39;)</span>
<span class="sd">            preset_num: Preset number (0-based index)</span>
<span class="sd">            channel: MIDI channel</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;last_preset/synth_type&quot;</span><span class="p">,</span> <span class="n">synth_type</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;last_preset/preset_num&quot;</span><span class="p">,</span> <span class="n">preset_num</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;last_preset/channel&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Saved last preset: </span><span class="si">{</span><span class="n">synth_type</span><span class="si">}</span><span class="s2"> #</span><span class="si">{</span><span class="n">preset_num</span><span class="si">}</span><span class="s2"> on channel </span><span class="si">{</span><span class="n">channel</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error saving last preset&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._show_favorite_context_menu">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._show_favorite_context_menu">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_show_favorite_context_menu</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">button</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">FavoriteButton</span><span class="p">,</span> <span class="n">SequencerSquare</span><span class="p">]</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Show context menu for favorite button&quot;&quot;&quot;</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">QMenu</span><span class="p">()</span>

        <span class="c1"># Add save action if we have address current preset</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;current_preset_number&quot;</span><span class="p">):</span>
            <span class="n">save_action</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;Save Current Preset&quot;</span><span class="p">)</span>
            <span class="n">save_action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_to_favorite</span><span class="p">(</span><span class="n">button</span><span class="p">))</span>

        <span class="c1"># Add clear action if slot has address preset</span>
        <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">preset</span><span class="p">:</span>
            <span class="n">clear_action</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;Clear Slot&quot;</span><span class="p">)</span>
            <span class="n">clear_action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clear_favorite</span><span class="p">(</span><span class="n">button</span><span class="p">))</span>

        <span class="n">menu</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="n">button</span><span class="o">.</span><span class="n">mapToGlobal</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span></div>


<div class="viewcode-block" id="JDXiInstrument._save_to_favorite">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._save_to_favorite">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_save_to_favorite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">FavoriteButton</span><span class="p">,</span> <span class="n">SequencerSquare</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save current preset to favorite slot</span>

<span class="sd">        :param button: Union[FavoriteButton, SequencerSquare]</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;current_preset_number&quot;</span><span class="p">):</span>
            <span class="c1"># Get current preset info from settings</span>
            <span class="n">synth_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                <span class="s2">&quot;last_preset/synth_type&quot;</span><span class="p">,</span> <span class="n">JDXiSynth</span><span class="o">.</span><span class="n">ANALOG_SYNTH</span>
            <span class="p">)</span>
            <span class="n">preset_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;last_preset/preset_num&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
            <span class="n">channel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;last_preset/channel&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Get the current preset name</span>
                <span class="n">preset_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preset_manager</span><span class="o">.</span><span class="n">get_preset_name_by_type_and_index</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_synth_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_preset_index</span>
                <span class="p">)</span>

                <span class="c1"># Save to button (which will also save to settings)</span>
                <span class="n">button</span><span class="o">.</span><span class="n">save_preset_as_favourite</span><span class="p">(</span>
                    <span class="n">synth_type</span><span class="p">,</span> <span class="n">preset_num</span><span class="p">,</span> <span class="n">preset_name</span><span class="p">,</span> <span class="n">channel</span>
                <span class="p">)</span>

                <span class="c1"># Update display to show the saved preset</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_display_preset</span><span class="p">(</span>
                    <span class="nb">int</span><span class="p">(</span><span class="n">preset_num</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">preset_name</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
                <span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error saving to favorite&quot;</span><span class="p">,</span> <span class="n">ex</span><span class="p">)</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Error saving preset: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._clear_favorite">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._clear_favorite">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_clear_favorite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">FavoriteButton</span><span class="p">,</span> <span class="n">SequencerSquare</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clear favorite slot</span>

<span class="sd">        :param button: FavoriteButton</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">button</span><span class="o">.</span><span class="n">clear_preset</span><span class="p">()</span></div>


<div class="viewcode-block" id="JDXiInstrument._load_saved_favorites">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._load_saved_favorites">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_load_saved_favorites</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load saved favorites from settings&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequencer_buttons</span><span class="p">:</span>
            <span class="n">synth_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;favorites/slot</span><span class="si">{</span><span class="n">button</span><span class="o">.</span><span class="n">slot_number</span><span class="si">}</span><span class="s2">/synth_type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">synth_type</span><span class="p">:</span>
                <span class="n">preset_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;favorites/slot</span><span class="si">{</span><span class="n">button</span><span class="o">.</span><span class="n">slot_number</span><span class="si">}</span><span class="s2">/preset_num&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span>
                <span class="p">)</span>
                <span class="n">preset_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;favorites/slot</span><span class="si">{</span><span class="n">button</span><span class="o">.</span><span class="n">slot_number</span><span class="si">}</span><span class="s2">/preset_name&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
                <span class="p">)</span>
                <span class="n">channel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;favorites/slot</span><span class="si">{</span><span class="n">button</span><span class="o">.</span><span class="n">slot_number</span><span class="si">}</span><span class="s2">/channel&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span>
                <span class="p">)</span>

                <span class="n">button</span><span class="o">.</span><span class="n">save_preset_as_favourite</span><span class="p">(</span>
                    <span class="n">synth_type</span><span class="p">,</span> <span class="n">preset_num</span><span class="p">,</span> <span class="n">preset_name</span><span class="p">,</span> <span class="n">channel</span>
                <span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._save_favorite">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._save_favorite">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_save_favorite</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">FavoriteButton</span><span class="p">,</span> <span class="n">SequencerSquare</span><span class="p">],</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save the current preset as an address favorite and prevent toggling off</span>

<span class="sd">        :param button: button: Union[FavoriteButton, SequencerSquare]</span>
<span class="sd">        :param index: int</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">QSettings</span><span class="p">(</span><span class="s2">&quot;mabsoft&quot;</span><span class="p">,</span> <span class="n">__package_name__</span><span class="p">)</span>
        <span class="n">preset_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;favorite_</span><span class="si">{</span><span class="n">index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="n">button_preset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_button_preset</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">button_preset</span><span class="p">:</span>
                <span class="n">button</span><span class="o">.</span><span class="n">preset</span> <span class="o">=</span> <span class="n">button_preset</span>  <span class="c1"># Store preset in button</span>
                <span class="n">button</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Tone </span><span class="si">{</span><span class="n">button_preset</span><span class="o">.</span><span class="n">number</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">button_preset</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">button_preset</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="n">button</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Keep it checked</span>
                <span class="n">button</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Prevent unchecking directly</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">preset_name</span><span class="p">,</span> <span class="n">button_preset</span><span class="p">)</span>  <span class="c1"># Save preset</span>
                <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Saved </span><span class="si">{</span><span class="n">button_preset</span><span class="si">}</span><span class="s2"> as </span><span class="si">{</span><span class="n">preset_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_button_preset</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>  <span class="c1"># Load stored preset if checked</span></div>


<div class="viewcode-block" id="JDXiInstrument._load_settings">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._load_settings">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_load_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load application settings&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;settings&quot;</span><span class="p">):</span>
                <span class="c1"># Load MIDI port settings</span>
                <span class="n">input_port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;midi_in&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">output_port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;midi_out&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

                <span class="c1"># Load window geometry</span>
                <span class="n">geometry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;geometry&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">geometry</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">restoreGeometry</span><span class="p">(</span><span class="n">geometry</span><span class="p">)</span>

                <span class="c1"># Load preset info</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_preset_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;preset_number&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_preset_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                    <span class="s2">&quot;preset_name&quot;</span><span class="p">,</span> <span class="s2">&quot;INIT PATCH&quot;</span>
                <span class="p">)</span>

                <span class="c1"># Try to open MIDI ports if they were saved</span>
                <span class="k">if</span> <span class="n">input_port</span> <span class="ow">and</span> <span class="n">output_port</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_midi_init_ports</span><span class="p">(</span><span class="n">input_port</span><span class="p">,</span> <span class="n">output_port</span><span class="p">)</span>

                <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;JD-Xi Settings loaded successfully&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error loading settings&quot;</span><span class="p">,</span> <span class="n">ex</span><span class="p">)</span></div>


<div class="viewcode-block" id="JDXiInstrument._save_settings">
<a class="viewcode-back" href="../../../../../autoapi/jdxi_editor/ui/windows/jdxi/instrument/index.html#jdxi_editor.ui.windows.jdxi.instrument.JDXiInstrument._save_settings">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">_save_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save application settings&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Save MIDI port settings</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;settings&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;midi_in&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">in_port_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;midi_out&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">midi_helper</span><span class="o">.</span><span class="n">out_port_name</span><span class="p">)</span>

                <span class="c1"># Save window geometry</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;geometry&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">saveGeometry</span><span class="p">())</span>

                <span class="c1"># Save current preset info</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;preset_number&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_preset_number</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;preset_name&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_preset_name</span><span class="p">)</span>

                <span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;Settings saved successfully&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error saving settings&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span><span class="p">)</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Mark Mrooks.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>